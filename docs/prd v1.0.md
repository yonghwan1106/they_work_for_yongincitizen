물론입니다. 제공해주신 기술 스택과 이전 리서치 내용을 바탕으로, '그들은 용인시민을 위해 일합니다' 프로젝트를 위한 상세 제품 요구사항 정의서(PRD)를 단계별 실행 전략과 함께 작성해 드리겠습니다.

---

## **'그들은 용인시민을 위해 일합니다' - 제품 요구사항 정의서 (PRD)**

### **1. 개요 (Overview)**

본 문서는 용인특례시의회 의정활동 모니터링 웹 플랫폼, '그들은 용인시민을 위해 일합니다'의 개발을 위한 제품 요구사항을 정의합니다. 영국의 'TheyWorkForYou'를 벤치마킹하여, 용인시의회에서 공개하는 데이터를 시민들이 이해하기 쉽고 유용하게 활용할 수 있는 형태로 가공 및 제공하는 것을 목표로 합니다.

### **2. 목표 (Goals)**

*   **투명성 증대:** 복잡하고 분산된 의정 정보를 통합적이고 검색 가능한 형태로 제공하여 의회 운영의 투명성을 높입니다.
*   **책임성 강화:** 시의원의 발언, 활동, 특히 표결 기록을 체계적으로 추적하고 공개하여 선출직 공직자로서의 책임성을 강화합니다.
*   **시민 참여 활성화:** 시민들이 자신의 지역구 의원을 쉽게 찾고, 주요 현안에 대한 의원의 입장을 명확히 파악하며, 의정활동에 대한 관심과 참여를 유도합니다.

### **3. 기술 스택 (Tech Stack)**

*   **프론트엔드:** Next.js
*   **배포/호스팅:** Vercel (GitHub 연동 CI/CD)
*   **데이터베이스/백엔드:** Supabase (PostgreSQL DB, Auth, Storage)
*   **데이터 수집/처리:** Python (BeautifulSoup, Requests, Pandas 등)
*   **AI API:** Anthropic Claude 3 Sonnet
*   **지도 API:** 네이버 지도 API (Geocoding)
*   **제안 API:**
    *   **이메일 발송:** Resend API (알림 기능 구현용)
    *   **공공 데이터:** 공공데이터포털(data.go.kr) API (선거구 데이터 확보용)

### **4. 단계별 개발 로드맵 (Phased Development Roadmap)**

프로젝트의 방대한 범위를 고려하여, 핵심 가치를 빠르게 전달하고 점진적으로 기능을 확장하는 3단계 개발 전략을 제안합니다.

*   **Phase 1: MVP - 정보 기반 구축 (Foundation)**
    *   **목표:** 즉시 활용 가능한 데이터를 통합하여 플랫폼의 기본 골격을 완성하고 최소 기능 제품(MVP)을 출시합니다. 이를 통해 프로젝트의 가치를 증명하고 초기 사용자 기반을 확보합니다.
*   **Phase 2: 핵심 기능 - 책임 추궁 엔진 (Accountability Engine)**
    *   **목표:** 프로젝트의 핵심 가치인 '책임 추궁' 기능을 구현합니다. 비정형 데이터(회의록)에서 핵심 정보(개별 의원 발언 및 표결 기록)를 추출하고 구조화하는 데 집중합니다.
*   **Phase 3: 시민 참여 및 고급 기능 (Engagement & Advanced Features)**
    *   **목표:** 수동적인 정보 조회를 넘어, 시민들이 능동적으로 의정활동을 감시하고 참여할 수 있는 양방향 기능을 추가하여 플랫폼을 완성합니다.

---

### **5. 상세 기능 명세 (Detailed Feature Specifications)**

#### **Phase 1: MVP - 정보 기반 구축 (Foundation)**

**1.1. 데이터 수집 파이프라인 구축**

*   **사용자 스토리:** 개발자로서, 용인시의회 웹사이트의 데이터를 안정적으로 수집하고 데이터베이스에 저장하는 자동화된 시스템을 원한다.
*   **요구사항:**
    *   Python 스크립트를 사용하여 용인시의회 웹사이트의 의원 정보 [1], 회의록 [1], 의안 정보 [2]를 주기적으로 스크레이핑.
    *   수집된 원시 데이터를 정제하여 Supabase DB의 각 테이블(councillors, meetings, bills 등)에 저장.
    *   GitHub Actions 또는 Vercel Cron Jobs를 사용하여 스크레이핑 스크립트를 매일 자동으로 실행.
*   **기술 구현:**
    *   **Python:** `requests`로 HTML 요청, `BeautifulSoup4`로 파싱.
    *   **Supabase:** `supabase-py` 라이브러리를 사용하여 Python 스크립트에서 DB로 데이터 삽입/업데이트.
    *   **자동화:** GitHub Actions 스케줄 워크플로우 설정.

**1.2. 의원별 디지털 서류철**

*   **사용자 스토리:** 시민으로서, 특정 시의원의 프로필, 대표 발의 의안, 위원회 활동 등 모든 정보를 한 페이지에서 종합적으로 확인하고 싶다.
*   **요구사항:**
    *   각 의원별 고유 페이지 생성 (`/councillor/[id]`).
    *   의원 프로필(사진, 정당, 선거구) 표시.[1]
    *   해당 의원이 대표 발의한 의안 목록 표시.[2]
    *   소속 위원회 및 활동 내역 표시.
*   **기술 구현:**
    *   **Next.js:** 정적 사이트 생성(SSG) 또는 증분 정적 재생성(ISR)을 사용하여 빠른 로딩 속도 확보. `getStaticPaths`로 의원별 페이지 사전 생성.
    *   **Supabase:** 의원 정보를 조회하여 페이지에 렌더링.

**1.3. 통합 회의록 아카이브**

*   **사용자 스토리:** 기자로서, 특정 키워드가 포함된 모든 회의록을 한 번에 검색하여 관련 내용을 쉽게 찾고 싶다.
*   **요구사항:**
    *   모든 회의록 텍스트를 검색할 수 있는 검색 페이지 제공.
    *   키워드, 발언자(의원 이름), 날짜 등으로 필터링 기능 제공.
    *   검색 결과는 해당 발언이 포함된 회의록의 원문으로 연결.
*   **기술 구현:**
    *   **Next.js:** 검색 UI 및 결과 페이지 구현.
    *   **Supabase:** PostgreSQL의 Full-Text Search 기능을 활용하여 검색 기능 구현. 검색 쿼리를 처리하는 Edge Function 생성 가능.

**1.4. 의안 추적기**

*   **사용자 스토리:** 시민운동가로서, 특정 조례안이 발의된 시점부터 최종 처리될 때까지의 모든 과정을 한눈에 추적하고 싶다.
*   **요구사항:**
    *   각 의안별 상세 페이지 생성 (`/bill/[id]`).
    *   의안 기본 정보(의안명, 발의자, 제안일, 처리 결과) 표시.[2]
    *   해당 의안이 논의된 모든 회의록으로의 링크 제공.
*   **기술 구현:**
    *   **Next.js:** 동적 라우팅을 사용하여 의안별 페이지 생성.
    *   **Supabase:** 의안 정보와 관련 회의록 정보를 관계형으로 연결하여 데이터 조회.

---

#### **Phase 2: 핵심 기능 - 책임 추궁 엔진 (Accountability Engine)**

**2.1. AI 기반 회의록 분석 및 발언 추출**

*   **사용자 스토리:** 시민으로서, 회의록 전체를 읽지 않고도 특정 의원이 어떤 주제에 대해 어떤 발언을 했는지 요약된 내용으로 빠르게 파악하고 싶다.
*   **요구사항:**
    *   회의록 텍스트에서 발언자(의원)와 발언 내용을 자동으로 분리하여 DB에 구조화.
    *   긴 발언 내용을 3~5줄의 핵심 내용으로 요약.
    *   발언의 핵심 키워드 또는 주제 추출.
*   **기술 구현:**
    *   **Python:** 정규표현식(Regex)과 패턴 매칭을 사용하여 회의록에서 '의원 OOO' 패턴으로 발언자를 1차 식별.
    *   **Claude Sonnet 4 API:** 식별된 발언 내용을 API에 전달. "다음 회의록 발언 내용을 핵심만 요약하고, 주요 키워드를 5개 추출해줘. 결과는 JSON 형식으로 줘." 와 같은 프롬프트 사용.
    *   **Supabase:** 추출된 구조화된 데이터(councillor\_id, meeting\_id, speech\_text, summary, keywords)를 `speeches` 테이블에 저장.

**2.2. 표결 기록 추출 시스템 (AI + Human-in-the-loop)**

*   **사용자 스토리:** 시민으로서, 특정 법안에 대해 내가 뽑은 의원이 찬성했는지 반대했는지 명확하게 알고 싶다.
*   **요구사항:**
    *   회의록 텍스트 내에 기록된 개별 의원의 표결(찬성, 반대, 기권) 정보를 추출.[2]
    *   추출된 정보는 의안, 의원, 표결 결과(찬성/반대/기권)의 형태로 구조화되어 DB에 저장.
    *   AI가 추출한 데이터의 정확성을 검증하고 수정할 수 있는 내부 관리자용 페이지 제공.
*   **기술 구현:**
    *   **Python + Claude Sonnet 4 API:** 회의록에서 '표결', '투표', '이의 있으십니까' 등의 키워드를 감지. 해당 부분을 Claude API에 전달하여 "다음 텍스트에서 각 의원의 찬성/반대 여부를 추출하여 JSON 형식으로 반환해줘" 프롬프트로 구조화된 데이터 추출 시도.
    *   **Supabase:** `votes` 테이블(bill\_id, councillor\_id, vote\_cast, is\_verified) 생성. AI가 추출한 데이터는 `is_verified = false`로 저장.
    *   **Next.js + Supabase:** 간단한 인증 기능이 있는 내부 어드민 페이지를 제작. `is_verified = false`인 표결 기록을 보여주고, 운영자가 원문과 대조하며 클릭 한 번으로 데이터를 검증(`is_verified = true`)하거나 수정할 수 있는 UI 제공.

**2.3. 강화된 의원 프로필**

*   **사용자 스토리:** 유권자로서, 의원 프로필 페이지에서 그 의원의 모든 발언과 표결 기록을 시간순으로 보며 의정활동을 종합적으로 평가하고 싶다.
*   **요구사항:**
    *   Phase 1의 의원 프로필 페이지에 '발언 모아보기' 탭과 '표결 기록' 탭 추가.
    *   '발언 모아보기'에서는 해당 의원의 모든 발언을 최신순으로 표시.
    *   '표결 기록'에서는 주요 의안에 대한 찬반 여부를 명확하게 시각화하여 표시.
*   **기술 구현:**
    *   **Next.js:** 의원 ID를 기준으로 Supabase의 `speeches`와 `votes` 테이블에서 데이터를 조회하여 렌더링.
    *   **데이터 시각화:** `Chart.js` 또는 `D3.js` 같은 라이브러리를 사용하여 표결 성향을 파이 차트나 바 차트로 시각화.

---

#### **Phase 3: 시민 참여 및 고급 기능 (Engagement & Advanced Features)**

**3.1. '내 지역구 의원 찾기'**

*   **사용자 스토리:** 용인시민으로서, 우리 동네 주소를 입력하면 나를 대표하는 시의원이 누구인지 즉시 알고 싶다.
*   **요구사항:**
    *   사용자가 주소(동/읍/면)를 입력할 수 있는 검색창 제공.
    *   입력된 주소에 해당하는 지역구와 담당 시의원 정보를 보여주고, 해당 의원의 프로필 페이지로 연결.
*   **기술 구현:**
    *   **선거구 데이터 확보:** 공공데이터포털(data.go.kr)에서 용인시 선거구 획정 데이터를 확보. 행정동과 선거구를 매핑하는 데이터를 Supabase DB에 구축.
    *   **네이버 지도 Geocoding API:** (선택사항) 사용자가 상세 주소를 입력했을 때, 이를 행정동으로 변환하는 데 사용.
    *   **Next.js:** 주소 입력 UI 구현. 입력된 주소를 기반으로 DB를 조회하여 결과를 표시하는 API Route 또는 서버 컴포넌트 로직 작성.

**3.2. 의정활동 이메일 알림 시스템**

*   **사용자 스토리:** 특정 이슈에 관심이 많은 시민으로서, 내가 관심 있는 키워드(예: '반도체 클러스터')가 회의에서 언급되거나, 내가 지지하는 의원이 발언할 때마다 이메일로 알림을 받고 싶다.
*   **요구사항:**
    *   사용자가 이메일 주소를 등록하고 알림을 설정할 수 있는 페이지 제공.
    *   알림 조건: 특정 의원, 특정 키워드, 특정 의안 상태 변경.
    *   설정된 조건이 충족되면 사용자에게 이메일 발송.
*   **기술 구현:**
    *   **Supabase Auth:** 사용자 가입 및 이메일 인증 기능 구현.
    *   **Supabase DB:** `subscriptions` 테이블(user\_id, alert\_type, keyword) 생성.
    *   **Vercel Cron Jobs / GitHub Actions:** 매일 정해진 시간에 실행되는 Python 스크립트.
        1.  어제 새로 추가된 회의록/발언/의안 데이터를 조회.
        2.  `subscriptions` 테이블과 대조하여 알림 발송 대상을 찾음.
        3.  **Resend API:** 식별된 사용자에게 알림 이메일 발송.

**3.3. AI 기반 의정활동 Q&A 챗봇**

*   **사용자 스토리:** 정치에 익숙하지 않은 학생으로서, "용인시 청소년 지원 조례는 누가 발의했고, 주요 내용은 뭔가요?"처럼 자연스러운 질문을 통해 원하는 정보를 얻고 싶다.
*   **요구사항:**
    *   사용자가 자연어 질문을 입력할 수 있는 채팅 인터페이스.
    *   질문의 의도를 파악하여 DB에 축적된 의원, 의안, 발언, 표결 데이터를 기반으로 답변 생성.
    *   답변의 근거가 되는 회의록이나 의안 페이지로의 링크를 함께 제공.
*   **기술 구현:**
    *   **RAG (Retrieval-Augmented Generation) 아키텍처:**
        1.  **Retrieval:** 사용자의 질문이 들어오면, Supabase Vector(pgvector)를 사용하여 질문과 의미적으로 가장 유사한 발언, 의안 정보를 DB에서 검색.
        2.  **Augmentation:** 검색된 데이터를 컨텍스트(context)로 구성.
        3.  **Generation:** 구성된 컨텍스트와 원본 질문을 Claude Sonnet 4 API에 함께 전달. "다음 컨텍스트를 기반으로 질문에 답변해줘. 답변은 반드시 컨텍스트에 있는 내용만을 근거로 하고, 출처 링크를 포함해줘." 와 같은 프롬프트 사용.
    *   **Next.js:** 채팅 UI 구현 및 AI 백엔드(Vercel Edge Function)와 실시간 통신.